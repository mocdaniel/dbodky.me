---
import { Github, Linkedin } from "@lucide/astro";
---

<section id="contact" class="py-24 px-6 lg:px-8 max-w-7xl mx-auto">
  <div class="max-w-3xl mx-auto space-y-12">
    <div class="text-center">
      <h2 class="text-4xl font-bold mb-4 text-foreground">
        Let&apos;s Connect
      </h2>
      <p class="text-lg text-muted-foreground">
        I&apos;m always interested in hearing about new technologies and
        challenges.<br />You can also reach out with questions or feedback.
      </p>
    </div>

    {/* Contact Form */}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div class="p-8 rounded-xl bg-card border border-border">
        <h3 id="contact" class="text-xl font-bold mb-6 text-foreground">
          Send me a message
        </h3>
        <form class="space-y-4">
          <div>
            <label
              for="name"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Name (Optional)
            </label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder="John Doe"
              class="w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
            />
          </div>
          <div>
            <label
              for="email"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Email Address
            </label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="your@email.com"
              class="w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
              required
            />
          </div>

          <div>
            <label
              for="message"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Message
            </label>
            <textarea
              id="message"
              name="message"
              rows={6}
              placeholder="Tell me about your project..."
              class="w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all resize-none"
              required></textarea>
          </div>

          <button
            type="submit"
            class="w-full px-6 py-3 bg-accent text-accent-foreground rounded-lg font-semibold hover:opacity-90 transition-opacity"
          >
            Send Message
          </button>

          {/* Success and Error Messages */}
          <div class="space-y-3 mt-6">
            {/* Success Message */}

            <div
              id="success-msg"
              class="p-4 rounded-lg bg-green-500/10 border border-green-500/30 items-start gap-3 hidden"
            >
              <svg
                class="w-5 h-5 text-green-500 mt-0.5 shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width={2}
                  d="M5 13l4 4L19 7"></path>
              </svg>
              <div>
                <p class="font-semibold text-green-500 text-sm">
                  Message sent successfully!
                </p>
                <p class="text-green-400/80 text-sm mt-1">
                  Thank you for reaching out. I&apos;ll get back to you soon.
                </p>
              </div>
            </div>

            {/* Error Message */}
            <div
              id="error-msg"
              class="p-4 rounded-lg bg-red-500/10 border border-red-500/30 hidden items-start gap-3"
            >
              <svg
                class="w-5 h-5 text-red-500 mt-0.5 shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width={2}
                  d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div>
                <p class="font-semibold text-red-500 text-sm">
                  Failed to send message
                </p>
                <p class="text-red-400/80 text-sm mt-1">
                  Something went wrong. Please try again or contact me via one
                  of my Social Media profiles.
                </p>
              </div>
            </div>
          </div>
        </form>
      </div>

      {/* Social Links Section */}
      <div class="space-y-8">
        <div class="p-8 rounded-xl bg-card border border-border">
          <h3 class="text-xl font-bold mb-6 text-foreground">
            Find me on Socials
          </h3>
          <div class="space-y-4">
            <a
              href="https://github.com/mocdaniel"
              target="_blank"
              rel="noopener noreferrer"
              class="flex items-center gap-4 p-4 rounded-lg border border-border hover:border-accent hover:bg-accent/5 transition-all group"
            >
              <Github
                class="text-muted-foreground group-hover:text-accent transition-colors"
                size={24}
              />
              <div>
                <p
                  class="font-semibold text-foreground group-hover:text-accent transition-colors"
                >
                  GitHub
                </p>
                <p class="text-sm text-muted-foreground">@mocdaniel</p>
              </div>
            </a>

            <a
              href="https://linkedin.com/in/daniel-bodky"
              target="_blank"
              rel="noopener noreferrer"
              class="flex items-center gap-4 p-4 rounded-lg border border-border hover:border-accent hover:bg-accent/5 transition-all group"
            >
              <Linkedin
                class="text-muted-foreground group-hover:text-accent transition-colors"
                size={24}
              />
              <div>
                <p
                  class="font-semibold text-foreground group-hover:text-accent transition-colors"
                >
                  LinkedIn
                </p>
                <p class="text-sm text-muted-foreground">in/daniel-bodky</p>
              </div>
            </a>

            <a
              href="https://bsky.app/profile/dbodky.me"
              target="_blank"
              rel="noopener noreferrer"
              class="flex items-center gap-4 p-4 rounded-lg border border-border hover:border-accent hover:bg-accent/5 transition-all group"
            >
              <svg
                class="fill-muted-foreground group-hover:fill-accent"
                height="24"
                width="24"
                role="img"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                ><title>Bluesky</title><path
                  d="M5.202 2.857C7.954 4.922 10.913 9.11 12 11.358c1.087-2.247 4.046-6.436 6.798-8.501C20.783 1.366 24 .213 24 3.883c0 .732-.42 6.156-.667 7.037-.856 3.061-3.978 3.842-6.755 3.37 4.854.826 6.089 3.562 3.422 6.299-5.065 5.196-7.28-1.304-7.847-2.97-.104-.305-.152-.448-.153-.327 0-.121-.05.022-.153.327-.568 1.666-2.782 8.166-7.847 2.97-2.667-2.737-1.432-5.473 3.422-6.3-2.777.473-5.899-.308-6.755-3.369C.42 10.04 0 4.615 0 3.883c0-3.67 3.217-2.517 5.202-1.026"
                ></path></svg
              >
              <div>
                <p
                  class="font-semibold text-foreground group-hover:text-accent transition-colors"
                >
                  Bluesky
                </p>
                <p class="text-sm text-muted-foreground">@dbodky.me</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { actions } from "astro:actions";
  import { navigate } from "astro:transitions/client";

  const form = document.querySelector("form");
  form?.addEventListener("submit", async (event) => {
    event.preventDefault();
    const formData = new FormData(form);
    const { error } = await actions.sendContactMail(formData);
    if (!error) {
      const success = document.querySelector("#success-msg");
      success?.classList.toggle("hidden");
      success?.classList.toggle("flex");
    } else {
      const error = document.querySelector("#error-msg");
      error?.classList.toggle("hidden");
      error?.classList.toggle("flex");
    }

    navigate("/#contact");
  });
</script>
