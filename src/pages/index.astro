---
import ArrowRight from "@lucide/astro/icons/arrow-right";
import Main from "../layouts/main.astro";
import Github from "@lucide/astro/icons/github";
import Linkedin from "@lucide/astro/icons/linkedin";
import { getCollection, render } from "astro:content";
import Contact from "@/components/Contact.astro";
import { ChevronDown } from "@lucide/astro";
import Separator from "@/components/Separator.astro";

const content = {
  title: "Home",
  desc: "My website about containers, clusters, and the cloud.",
  img: "https://dbodky.me/og-images/home.png",
  slug: "https://dbodky.me/",
  type: "website" as "website" | "article",
  published_at: undefined,
  tags: undefined,
};

const allBlogPosts = await getCollection("blogSchema");

allBlogPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);
allBlogPosts.splice(3);
---

<Main content={content}>
  <main class="min-h-screen bg-background text-foreground overflow-hidden">
    <section class="pb-24 px-6 lg:px-8 max-w-7xl mx-auto relative">
      <div
        class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-screen"
      >
        <div class="space-y-8">
          <div class="space-y-4">
            <h1
              class="text-6xl lg:text-7xl font-bold text-foreground leading-tight text-balance"
            >
              Hi, I am <span class="text-primary">Daniel</span>
            </h1>
            <p
              class="text-2xl lg:text-3xl text-muted-foreground font-light leading-relaxed max-w-lg text-balance"
            >
              I think, write, and speak about containers, clusters, and the
              cloud.
            </p>
          </div>

          <div class="flex gap-4 pt-8">
            <a href="/blog">
              <button
                class="px-8 py-4 bg-primary text-primary-foreground rounded-full font-semibold hover:opacity-90 transition-opacity flex items-center gap-2 hover:cursor-pointer"
              >
                Browse my blog
                <ArrowRight size={20} />
              </button>
            </a>
            <a href="/speaking">
              <button
                class="px-8 py-4 border-2 border-accent text-accent rounded-full font-semibold hover:bg-accent hover:text-accent-foreground transition-all hover:cursor-pointer"
              >
                View My Work
              </button>
            </a>
          </div>

          <div class="flex gap-6 pt-8">
            <a
              href="https://github.com/mocdaniel"
              aria-label="GitHub"
              class="text-muted-foreground hover:text-accent transition-colors"
            >
              <Github size={24} />
            </a>
            <a
              href="https://linkedin.com/in/daniel-bodky"
              aria-label="LinkedIn"
              class="text-muted-foreground hover:text-accent transition-colors"
            >
              <Linkedin size={24} />
            </a>
            <a
              href="https://bsky.app/profile/dbodky.me"
              class="fill-muted-foreground hover:fill-accent transition-colors"
            >
              <svg
                height="24"
                width="24"
                role="img"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                ><title>Bluesky</title><path
                  d="M5.202 2.857C7.954 4.922 10.913 9.11 12 11.358c1.087-2.247 4.046-6.436 6.798-8.501C20.783 1.366 24 .213 24 3.883c0 .732-.42 6.156-.667 7.037-.856 3.061-3.978 3.842-6.755 3.37 4.854.826 6.089 3.562 3.422 6.299-5.065 5.196-7.28-1.304-7.847-2.97-.104-.305-.152-.448-.153-.327 0-.121-.05.022-.153.327-.568 1.666-2.782 8.166-7.847 2.97-2.667-2.737-1.432-5.473 3.422-6.3-2.777.473-5.899-.308-6.755-3.369C.42 10.04 0 4.615 0 3.883c0-3.67 3.217-2.517 5.202-1.026"
                ></path></svg
              >
            </a>
          </div>
        </div>

        <div class="hidden lg:flex justify-center items-center">
          <div class="relative w-96 h-96">
            {/* Dracula-themed gradient circles */}
            <div
              class="absolute inset-0 bg-linear-to-br from-primary/40 via-accent/20 to-transparent rounded-full blur-2xl"
            >
            </div>
            <div
              class="absolute top-20 right-20 w-72 h-72 bg-linear-to-br from-secondary/60 via-primary/40 to-transparent rounded-full blur-2xl animate-pulse"
            >
            </div>
            <div
              class="absolute -bottom-20 -right-20 w-96 h-96 bg-linear-to-t from-muted/20 via-accent/10 to-transparent rounded-full blur-2xl"
            >
            </div>
          </div>
        </div>
      </div>

      <div
        class="absolute bottom-24 left-1/2 -translate-x-1/2 flex flex-col items-center gap-.5 animate-bounce"
      >
        <span class="text-md text-muted-foreground">Scroll to explore</span>
        <ChevronDown class="text-accent" size={32} />
      </div>
    </section>

    <Separator />

    <section id="blog" class="py-24 px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="space-y-12">
        <div>
          <h2 class="text-4xl font-bold mb-6 text-foreground">
            Latest Blog Posts
          </h2>
          <p class="text-lg text-muted-foreground">
            Insights and articles on cloud infrastructure, containers, and
            modern cloud native practices.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {
            allBlogPosts.map(async (post) => (
              <article class="group p-6 rounded-xl bg-card border border-border hover:border-accent transition-all duration-300">
                <div class="space-y-3 h-full flex flex-col">
                  <div class="flex gap-2">
                    {post.data.tags.map((tag) => (
                      <span class="text-xs px-2 py-1 rounded-full bg-primary/20 text-primary">
                        {tag}
                      </span>
                    ))}
                  </div>

                  <h3 class="text-xl font-bold text-foreground group-hover:text-accent transition-colors">
                    {post.data.title}
                  </h3>

                  <p class="text-muted-foreground text-sm grow">
                    {post.data.excerpt}
                  </p>

                  <div class="flex justify-between items-center pt-4 text-xs text-muted-foreground">
                    <span>
                      {post.data.pubDate.toLocaleDateString("en-US", {
                        month: "short",
                        day: "numeric",
                        year: "numeric",
                      })}
                    </span>
                    <span>
                      {(await render(post)).remarkPluginFrontmatter.minutesRead}
                    </span>
                  </div>

                  <a
                    href={`/blog/${post.id}`}
                    class="text-accent hover:text-secondary transition-colors font-semibold text-sm pt-2"
                  >
                    Read article â†’
                  </a>
                </div>
              </article>
            ))
          }
        </div>
      </div>
    </section>

    <Separator />

    <Contact />
  </main>
</Main>
