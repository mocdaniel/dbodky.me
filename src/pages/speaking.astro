---
import Separator from "@/components/Separator.astro";
import Main from "@/layouts/main.astro";
import { Quote } from "@lucide/astro";
import { getCollection } from "astro:content";

const content = {
  title: "My Work",
  desc: "Browse my talks and workshops, including slides and recordings.",
  img: "https://dbodky.me/og-images/speaking.png",
  slug: "https://dbodky.me/speaking",
  type: "website" as "website" | "article",
  published_at: undefined,
  tags: undefined,
};

const stats = [
  {
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-presentation-icon lucide-presentation"><path d="M2 3h20"/><path d="M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3"/><path d="m7 21 5-5 5 5"/></svg>',
    label: "Talks Given",
    value: "15+",
    color: "bg-chart-1",
  },
  {
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flask-conical-icon lucide-flask-conical"><path d="M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2"/><path d="M6.453 15h11.094"/><path d="M8.5 2h7"/></svg>',
    label: "Workshops",
    value: "10+",
    color: "bg-chart-2",
  },
  {
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin-icon lucide-map-pin"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></svg>',
    label: "Conferences",
    value: "15+",
    color: "bg-chart-4",
  },
  {
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-earth-icon lucide-earth"><path d="M21.54 15H17a2 2 0 0 0-2 2v4.54"/><path d="M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"/><path d="M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"/><circle cx="12" cy="12" r="10"/></svg>',
    label: "Countries",
    value: "5+",
    color: "bg-chart-5",
  },
];

// const testimonials = [
// {
// name: "Sarah Chen",
// role: "CTO at CloudTech",
// quote:
// "Daniel's workshop on Kubernetes best practices transformed how our team approaches container orchestration. His deep knowledge and clear communication style made complex topics accessible.",
// },
// {
// name: "Michael Rodriguez",
// role: "DevOps Lead at DataFlow",
// quote:
// "The most practical and insightful talk on multi-cloud architecture I've attended. Daniel's real-world examples and hands-on approach made all the difference.",
// },
// {
// name: "Emma Thompson",
// role: "Engineering Manager at ScaleUp",
// quote:
// "Daniel's container security workshop was eye-opening. He didn't just teach concepts, but showed us how to implement them immediately in our production environment.",
// },
// ];

const talks = await getCollection("talkSchema");
// sort talks by year given
talks.sort((a, b) => a.data.year - b.data.year).reverse();
---

<Main content={content}>
  <main class="min-h-screen bg-background text-foreground">
    {/* Hero Section with Stats */}
    <section class="pt-32 pb-16 px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="space-y-12">
        <div class="max-w-3xl">
          <h1
            class="text-5xl lg:text-6xl font-bold mb-6 text-foreground leading-tight text-balance"
          >
            Speaking & <span class="text-primary">Workshops</span>
          </h1>
          <p class="text-xl text-muted-foreground leading-relaxed">
            I share my knowledge about containers, Kubernetes, and cloud
            infrastructure at conferences and workshops around the world.
          </p>
          <p class="mt-4 text-xl text-muted-foreground leading-relaxed">
            Below you can find a selection of presentations and workshops I have
            given in the past, as well as testimonials of some attendees.<br />
            For most talks, slides and recordings are linked as well.
          </p>
          <p class="mt-4 text-2xl text-primary leading-relaxed">
            Feel free to explore what I have been up to!
          </p>
        </div>

        {/* Stats Grid */}
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6">
          {
            stats.map((stat) => (
              <div
                class={`p-6 lg:p-8 rounded-2xl ${stat.color} border border-border transition-all duration-300 group`}
              >
                <div class="space-y-3">
                  <div class="text-card group-hover:scale-110 transition-transform">
                    <Fragment set:html={stat.icon} />
                  </div>
                  <div>
                    <div class="text-3xl lg:text-4xl font-bold text-card">
                      {stat.value}
                    </div>
                    <div class="text-lg text-card mt-1">{stat.label}</div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <Separator />

    <section class="py-16 px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="space-y-8">
        <div
          class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"
        >
          <h2 class="text-4xl font-bold text-foreground">Talks & Workshops</h2>
        </div>

        {/* Talks List */}
        <div id="talks-list" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {
            talks.map((talk: any) => (
              <article
                data-talk-id={talk.id}
                data-technologies={JSON.stringify(talk.data.tags)}
                data-events={JSON.stringify(talk.data.conferences)}
                class="talk-item group p-6 rounded-xl bg-card border border-border hover:border-accent transition-all duration-300"
              >
                <div class="space-y-4 flex flex-col justify-start h-full">
                  <div class="flex items-start justify-between gap-4">
                    <h3 class="text-xl font-bold text-foreground group-hover:text-accent transition-colors">
                      {talk.data.title}
                    </h3>
                    <span
                      class={`px-3 py-1 flex flex-row justify-around items-center gap-1 rounded-full text-xs font-semibold whitespace-nowrap ${
                        talk.data.type === "Workshop"
                          ? "bg-chart-2/20 text-chart-2 border border-chart-2/30"
                          : "bg-chart-1/20 text-chart-1 border border-chart-1/30"
                      }`}
                    >
                      {talk.data.type === "Talk" ? (
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="lucide lucide-presentation-icon lucide-presentation"
                        >
                          <path d="M2 3h20" />
                          <path d="M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3" />
                          <path d="m7 21 5-5 5 5" />
                        </svg>
                      ) : talk.data.type === "Workshop" ? (
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="lucide lucide-flask-conical-icon lucide-flask-conical"
                        >
                          <path d="M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2" />
                          <path d="M6.453 15h11.094" />
                          <path d="M8.5 2h7" />
                        </svg>
                      ) : (
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="lucide lucide-zap-icon lucide-zap"
                        >
                          <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
                        </svg>
                      )}
                      {talk.data.type}
                    </span>
                  </div>

                  <p class="text-sm text-muted-foreground leading-relaxed">
                    {talk.data.excerpt}
                  </p>

                  {/* Technologies */}
                  <div class="flex flex-wrap gap-2 grow">
                    {talk.data.tags.map((tag: string) => (
                      <span
                        data-tech-tag={tag}
                        class="max-h-[26px] tech-tag px-2 py-1 rounded-md text-xs border transition-colors bg-primary/10 text-primary border-primary/20"
                      >
                        {tag}
                      </span>
                    ))}
                  </div>

                  {/* Links */}
                  {(talk.data.slides || talk.data.recording) && (
                    <div class="flex flex-wrap gap-3 pt-2">
                      {talk.data.slides && (
                        <a
                          href={talk.data.slides}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium bg-primary/10 text-primary border border-primary/20 hover:bg-primary/20 transition-colors"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <rect width="18" height="18" x="3" y="3" rx="2" />
                            <path d="M7 3v18" />
                            <path d="M17 8h.01" />
                            <path d="M17 12h.01" />
                            <path d="M17 16h.01" />
                          </svg>
                          Slides
                        </a>
                      )}
                      {talk.data.recording && (
                        <a
                          href={talk.data.recording}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium bg-secondary/10 text-secondary border border-secondary/20 hover:bg-secondary/20 transition-colors"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <polygon points="6 3 20 12 6 21 6 3" />
                          </svg>
                          Recording
                        </a>
                      )}
                    </div>
                  )}

                  {/* Events */}
                  <div class="pt-2 border-t border-border">
                    <p class="text-xs text-muted-foreground mb-2">
                      Presented at:
                    </p>
                    <div class="flex flex-wrap gap-2">
                      {talk.data.conferences.map(
                        (conference: string, j: number) => (
                          <span>
                            <span
                              data-event-tag={conference}
                              class="event-tag text-xs transition-colors text-foreground"
                            >
                              {conference}
                            </span>
                            {j < talk.data.conferences.length - 1 && (
                              <span class="text-muted-foreground ml-2">â€¢</span>
                            )}
                          </span>
                        ),
                      )}
                    </div>
                  </div>
                </div>
              </article>
            ))
          }
        </div>
      </div>
    </section>

    <Separator />

    <!-- {/* Testimonials Section */}
    <section class="py-16 px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="space-y-12">
        <div>
          <h2 class="text-4xl font-bold mb-4 text-foreground">
            What People Say
          </h2>
          <p class="text-lg text-muted-foreground">
            Feedback from attendees and organizers
          </p>
        </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {
            testimonials.map((testimonial) => (
              <div class="p-6 rounded-xl bg-card border border-border hover:border-accent transition-all duration-300">
                <div class="space-y-4">
                  <Quote size={24} class="text-accent" />
                  <p class="text-foreground leading-relaxed">
                    {testimonial.quote}
                  </p>
                  <div class="pt-4 border-t border-border">
                    <p class="font-semibold text-foreground">
                      {testimonial.name}
                    </p>
                    <p class="text-sm text-muted-foreground">
                      {testimonial.role}
                    </p>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <Separator />-->

    {/* CTA Section */}
    <section class="py-16 px-6 lg:px-8 max-w-7xl mx-auto">
      <div
        class="p-12 rounded-2xl bg-linear-to-br from-primary/10 via-accent/5 to-background border border-border"
      >
        <div class="max-w-2xl mx-auto text-center space-y-6">
          <h2 class="text-3xl lg:text-4xl font-bold text-foreground">
            Interested in having me speak?
          </h2>
          <p class="text-lg text-muted-foreground">
            I'm available for conference talks, workshops, and panel discussions
            on cloud infrastructure, containers, and cloud native practices.
          </p>
          <a
            href="/#contact"
            class="inline-block px-8 py-4 bg-accent text-accent-foreground rounded-full font-semibold hover:opacity-90 transition-opacity"
          >
            Get in Touch
          </a>
        </div>
      </div>
    </section>
  </main>
</Main>
